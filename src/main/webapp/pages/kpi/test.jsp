<%@ page language="java" pageEncoding="utf-8"%> 
<%@ include file="/WEB-INF/jsp/commons/include-tagsOnly.jsp"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="${ctx}/scripts/ext-4.1/resources/css/ext-all.css" />
	<link rel="stylesheet" type="text/css" href="${ctx}/scripts/mxgraph/css/grapheditor.css" />
	<script type="text/javascript" src="${ctx}/scripts/ext-4.1/ext-all.js"></script>
	<script type="text/javascript" src="${ctx}/scripts/mxgraph/js/client-min.js"></script> 
	<script type="text/javascript">
	Ext.onReady(function(){
        	mxBasePath = 'src';
			var xml="<mxGraphModel>  <root>    <mxCell id=\"0\"/>    <mxCell id=\"1\" parent=\"0\"/>    <mxCell id=\"2\" value=\"\" style=\"swimlaneLevel;fontSize=14;gradientColor=#666699;fillColor=#666699;fontColor=#FFFFFF\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"20\" y=\"10\" width=\"710\" height=\"150\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"48\" value=\"\" style=\"flowBase;fillColor=#FFFF99;gradientColor=#FFFF99\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"687\" height=\"150\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"4\" value=\"F1增加产品收入\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"260\" y=\"20\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"7\" value=\"F2提升产品价值\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"80\" y=\"80\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"8\" value=\"F3提高资源利用率\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"440\" y=\"80\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"51\" value=\"\" style=\"ellipse;fillColor=#FF0000;gradientColor=#FF0000\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"420\" y=\"30\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"52\" value=\"\" style=\"ellipse;fillColor=#FFFF00;gradientColor=#FFFF00\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"600\" y=\"90\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"50\" value=\"\" style=\"ellipse;fillColor=#FFFF00;gradientColor=#FFFF00\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"240\" y=\"90\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"58\" value=\"\" parent=\"2\" source=\"7\" target=\"4\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"160\" y=\"65\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"59\" value=\"\" parent=\"2\" source=\"8\" target=\"51\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"530\" y=\"45\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"66\" value=\"财&#xa;务&#xa;层&#xa;面\" style=\"text;fontSize=14;fontColor=#FFFFFF;fontStyle=1\" parent=\"2\" vertex=\"1\">      <mxGeometry x=\"2\" y=\"40\" width=\"20\" height=\"60\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"3\" value=\"\" style=\"swimlaneLevel;fontSize=14;fillColor=#666699;gradientColor=#666699;fontColor=#FFFFFF\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"20\" y=\"170\" width=\"710\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"38\" value=\"\" style=\"flowBase;fillColor=#99CCFF;gradientColor=#99CCFF\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"687\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"11\" value=\"\" style=\"flowBase;dashed=1;fillColor=#99CCFF;gradientColor=#99CCFF\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"60\" y=\"25\" width=\"600\" height=\"90\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"9\" value=\"C1提高客户满意度\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"80\" y=\"50\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"10\" value=\"C2提供优质产品\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"440\" y=\"50\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"53\" value=\"\" style=\"ellipse;fillColor=#FFFF00;gradientColor=#FFFF00\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"600\" y=\"60\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"54\" value=\"\" style=\"ellipse;fillColor=#FFFF00;gradientColor=#FFFF00\" parent=\"3\" vertex=\"1\">      <mxGeometry x=\"240\" y=\"60\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"60\" value=\"\" parent=\"3\" source=\"10\" target=\"54\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"67\" value=\"客&#xa;户&#xa;层&#xa;面\" style=\"text;fontStyle=1;fontSize=14;fontColor=#FFFFFF\" vertex=\"1\" parent=\"3\">      <mxGeometry x=\"2\" y=\"30\" width=\"20\" height=\"60\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"14\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;fillColor=#666699;gradientColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"190\" y=\"150\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"15\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;gradientColor=#666699;fillColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"535\" y=\"150\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"16\" value=\"\" style=\"swimlaneLevel;fontSize=14;gradientColor=#666699;fillColor=#666699;fontColor=#FFFFFF\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"20\" y=\"320\" width=\"710\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"47\" value=\"\" style=\"flowBase;fillColor=#FFFF99;gradientColor=#FFFF99\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"687\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"28\" value=\"质量管理\" style=\"flowBase;fontSize=14;fillColor=#666699;gradientColor=#666699;fontColor=#FFFFFF\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"337\" height=\"37.5\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"29\" value=\"按时交付\" style=\"flowBase;fontSize=14;gradientColor=#666699;fillColor=#666699;fontColor=#FFFFFF\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"352.5\" width=\"357.5\" height=\"37.5\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"32\" value=\"P1提高产品质量\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"80\" y=\"70\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"33\" value=\"P2提高开发效率\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"440\" y=\"70\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"55\" value=\"\" style=\"ellipse;fillColor=#00FF00;gradientColor=#00FF00\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"600\" y=\"80\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"56\" value=\"\" style=\"ellipse;fillColor=#FF0000;gradientColor=#FF0000\" parent=\"16\" vertex=\"1\">      <mxGeometry x=\"240\" y=\"80\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"68\" value=\"内&#xa;部&#xa;流&#xa;程\" style=\"text;fontColor=#FFFFFF;fontSize=14;fontStyle=1\" vertex=\"1\" parent=\"16\">      <mxGeometry x=\"2\" y=\"40\" width=\"20\" height=\"60\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"20\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;fillColor=#666699;gradientColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"190\" y=\"300\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"21\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;fillColor=#666699;gradientColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"535\" y=\"300\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"22\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;fillColor=#666699;gradientColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"535\" y=\"450\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"23\" value=\"\" style=\"triangle;rotation=-90;fontSize=14;fillColor=#666699;gradientColor=#666699\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"195\" y=\"450\" width=\"10\" height=\"30\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"24\" value=\"\" style=\"swimlaneLevel;fontSize=14;fillColor=#666699;gradientColor=#666699;fontColor=#FFFFFF\" parent=\"1\" vertex=\"1\">      <mxGeometry x=\"20\" y=\"470\" width=\"712.5\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"46\" value=\"\" style=\"flowBase;fillColor=#99CCFF;gradientColor=#99CCFF\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"689.5\" height=\"140\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"30\" value=\"员工素质\" style=\"flowBase;fontSize=14;fillColor=#666699;gradientColor=#666699;fontColor=#FFFFFF\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"23\" width=\"337\" height=\"37.5\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"31\" value=\"人力资源\" style=\"flowBase;fontSize=14;fillColor=#666699;gradientColor=#666699;fontColor=#FFFFFF\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"360\" width=\"352.5\" height=\"37.5\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"36\" value=\"L1塑造学习型组织，提高团队&#xa;创新能力\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"90\" y=\"70\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"37\" value=\"L2加强人才的培养，提高员工&#xa;专业素质及学习能力\" style=\"rounded=1;fillColor=#FFFFFF\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"440\" y=\"70\" width=\"170\" height=\"40\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"49\" value=\"\" style=\"ellipse;fillColor=#00FF00;gradientColor=#00FF00\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"250\" y=\"80\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"57\" value=\"\" style=\"ellipse;fillColor=#FFFF00;gradientColor=#FFFF00\" parent=\"24\" vertex=\"1\">      <mxGeometry x=\"600\" y=\"80\" width=\"20\" height=\"20\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"69\" value=\"学&#xa;习&#xa;与&#xa;成&#xa;长\" style=\"text;fontStyle=1;fontSize=14;fontColor=#FFFFFF\" vertex=\"1\" parent=\"24\">      <mxGeometry x=\"2\" y=\"40\" width=\"20\" height=\"70\" as=\"geometry\"/>    </mxCell>    <mxCell id=\"61\" value=\"\" parent=\"1\" source=\"11\" target=\"50\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"370\" y=\"170\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"62\" value=\"\" parent=\"1\" source=\"32\" target=\"9\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"250\" y=\"330\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"63\" value=\"\" parent=\"1\" source=\"33\" target=\"10\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"490\" y=\"330\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"64\" value=\"\" parent=\"1\" source=\"49\" target=\"56\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"330\" y=\"490\"/>        </Array>      </mxGeometry>    </mxCell>    <mxCell id=\"65\" value=\"\" parent=\"1\" source=\"57\" target=\"52\" edge=\"1\">      <mxGeometry relative=\"1\" as=\"geometry\">        <Array as=\"points\">          <mxPoint x=\"710\" y=\"330\"/>        </Array>      </mxGeometry>    </mxCell>  </root></mxGraphModel>";
			var container = document.getElementById('lala');  
            var model = new mxGraphModel();  
            var graph = new mxGraph(container, model);  
			graph.setCellsResizable(false);  
			//graph.setEnabled(false);//设置启用,就是允不允许你改变CELL的形状内容。  
			graph.setPanning(true);//移动镜头  
			//重写方法不允许那条线(edge)可以编辑  
			graph.isCellEditable = function(cell)  
			{  
				return !this.getModel().isEdge(cell)&&!this.getModel().isVertex(cell);  
			};  
			var node = mxUtils.load('${ctx}/scripts/mxgraph/resources/default-style.xml').getDocumentElement();
			var dec = new mxCodec(node.ownerDocument);
			dec.decode(node, graph.getStylesheet());
			graph.getModel().beginUpdate();   
			var doc = mxUtils.parseXml(xml); 
			var dec = new mxCodec(doc); 
			dec.decode(doc.documentElement, graph.getModel()); 
            graph.getModel().endUpdate();    
			graph.setConnectable(false);
			graph.setDropEnabled(true);
			graph.setPanning(true);
			graph.setTooltips(true);
			graph.connectionHandler.setCreateTarget(true);
			mxGraphHandler.prototype.setMoveEnabled(false);
           /* graph.addListener(mxEvent.DBLCLICK, function(sender, evt)
			{
			 //alert('选择的节点的id='+graph.getSelectionCells()[0].id+'；value='+graph.getSelectionCells()[0].value);
			 }); */
        });
	</script>	
</head>
<!-- Page passes the container for the graph to the grogram -->  
<body>  
    <div id="lala"></div>
</body>  
</html>  